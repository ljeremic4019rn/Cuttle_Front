<!--<p>THIS IS A ROOM {{gameAction.roomKey}}</p>-->

<div class="full-border">
    <h3>CURRENT PLAYERS TURN = {{this.gameEngineService.currentPlayersTurn}}</h3 >

    <h2 #seconds>TIMER: {{timer}}</h2>


    <div class="center-container" >


        <app-card-row id="table-0"
                      *ngIf="visible[0]"
                      class="table-cards-{{this.cardPositionOnScreen[0]}} table-border">
        </app-card-row>
<!--        <h3 class="table-cards-{{this.cardPositionOnScreen[0]}}" style="z-index: 1">0</h3>-->
        <app-card-row id="table-1"
                      *ngIf="visible[1]"
                      class="table-cards-{{this.cardPositionOnScreen[1]}} table-border">
        </app-card-row>
<!--        <h3 class="table-cards-{{this.cardPositionOnScreen[1]}}" style="z-index: 1">1</h3>-->
        <app-card-row id="table-2" fxflex="90"
                      *ngIf="visible[2]"
                      class="table-cards-{{this.cardPositionOnScreen[2]}} table-border">
        </app-card-row>
<!--        <h3 class="table-cards-{{this.cardPositionOnScreen[2]}}" style="z-index: 1">2</h3>-->
        <app-card-row id="table-3"
                      *ngIf="visible[3]"
                      class="table-cards-{{this.cardPositionOnScreen[3]}} table-border">
        </app-card-row>
<!--        <h3 class="table-cards-{{this.cardPositionOnScreen[3]}}"  style="z-index: 1">3</h3>-->


        <app-card-hand id="hand-0"
                       *ngIf="visible[0]"
                       (cdkDragStartedEvent)="cdkDragStartedFun()"
                       (cdkDragStoppedEvent)="cdkDragStoppedFun($event)"
                       class="player-hand-{{this.cardPositionOnScreen[0]}} hover-cursor">
        </app-card-hand>
        <app-card-hand id="hand-1"
                       *ngIf="visible[1]"
                       (cdkDragStartedEvent)="cdkDragStartedFun()"
                       (cdkDragStoppedEvent)="cdkDragStoppedFun($event)"
                       class="player-hand-{{this.cardPositionOnScreen[1]}} hover-cursor">
        </app-card-hand>
        <app-card-hand id="hand-2"
                       *ngIf="visible[2]"
                       (cdkDragStartedEvent)="cdkDragStartedFun()"
                       (cdkDragStoppedEvent)="cdkDragStoppedFun($event)"
                       class="player-hand-{{this.cardPositionOnScreen[2]}} hover-cursor">
        </app-card-hand>
        <app-card-hand id="hand-3"
                       *ngIf="visible[3]"
                       (cdkDragStartedEvent)="cdkDragStartedFun()"
                       (cdkDragStoppedEvent)="cdkDragStoppedFun($event)"
                       class="player-hand-{{this.cardPositionOnScreen[3]}} hover-cursor">
        </app-card-hand>

        <!--arrows for selecting which player to discard cards with power 4-->
        <div id="center" class="center-drop-area center-border">
            <i *ngIf="gameEngineService.numberOfPlayers >= 3" class="fa fa-long-arrow-right arrow2 hover-cursor"
               [ngStyle]="selectArrowStyle()" aria-hidden="true" (click)="selectPlayerForCardDiscard('top')"></i>
            <i *ngIf="gameEngineService.numberOfPlayers >= 3" class="fa fa-long-arrow-right arrow1 hover-cursor"
               [ngStyle]="selectArrowStyle()" aria-hidden="true" (click)="selectPlayerForCardDiscard('left')"></i>
            <i *ngIf="gameEngineService.numberOfPlayers == 4" class="fa fa-long-arrow-right arrow3 hover-cursor"
               [ngStyle]="selectArrowStyle()" aria-hidden="true" (click)="selectPlayerForCardDiscard('right')"></i>
        </div>

        <!--visual helper card for showing actions-->
<!--        todo stavi rotaciju tako da je okrenuta igracu koji je upravo igrao (koristi mapu za usere ili tako nesto) -->
        <doc-card *ngIf="gameEngineService.phantomCenterCard"  class="card center-card" [style]="visualUpdateCardsStyle()"  [card]='gameEngineService.phantomCenterCard!' [covered]="false"></doc-card>
    </div>

    <svg *ngIf="gameEngineService.phantomCenterCard && arrowVisible" id="arrow" height="5000" width="5000" style="z-index: 1;" >
        <line [attr.x1]="gameEngineService.ontoCardPlayed_x"  [attr.y1]="gameEngineService.ontoCardPlayed_y" [attr.x2]="getScreenCenterX()" [attr.y2]="getScreenCenterY()" style="stroke: red; stroke-width:5; stroke-dasharray: 10,6;" />
        <polygon [attr.points]="calculateTriangleCoordinates()" style="fill:rgb(255,0,0);" />
    </svg>

    <!-- DECK AND GRAVEYARD   -->

    <div id="deck" class="deck">
        <div *ngFor="let card of this.gameEngineService.deck; let i = index" >
            <mat-card class="deck-card hover-cursor" [ngStyle]="setDeckCardPosition(i)" (click)="draw()"></mat-card>
        </div>
        <label class="deck-label">deck</label>
    </div>

    <div id="graveyard" class="graveyard">
        <div *ngFor="let card of this.gameEngineService.graveyard; let i = index" >
            <doc-card class="graveyard-card" [ngStyle]="setGraveyardCardPosition(i)" (click)="openGraveyard()" [card]='card' [covered]="false"></doc-card>
        </div>
        <label class="graveyard-label">graveyard</label>
    </div>

    <button (click)="endTurn()">END TURN</button>
<!--    <input [(ngModel)]="input" style="font-weight: bold" id="join" type="text" name="txt" placeholder="Key" required="">-->
<!--    <button (click)="highlightCard(gameEngineService.forced7Card)">TEST</button>-->

<!--    todo uradi not random discard kasnije (sve podeseno samo da se preko socketa otvori drugom igracu da selektuje) -->
<!--    <div class="discard-display-center" >-->
<!--        <div class="discard-display">-->
<!--            <div *ngFor="let card of this.gameEngineService.graveyard" fxFlex="90px">-->
<!--                <doc-card class="card hover-cursor graveyard-hover" style="scale: 70%; margin: -0.5rem" [card]='card' (click)="selectGraveyardCard(card)" [covered]="false"></doc-card>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

    <div *ngIf="graveyardVisible" class="graveyard-display-center">
        <div style="height: 200%; width: 100%; position: absolute; z-index: -1"   (click)="closeGraveyard()"></div>
        <div class="graveyard-display">
            <div *ngFor="let card of this.gameEngineService.graveyard" fxFlex="90px">
                <doc-card class="card hover-cursor" style="scale: 70%; margin: -0.5rem" [card]='card' (click)="selectGraveyardCard(card)" [covered]="false"></doc-card>
            </div>
        </div>
    </div>

</div>
